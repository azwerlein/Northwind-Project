@model Northwind.Models.Product

<div class="bg-primary m-1 p-1 text-white"><h4>@Model.ProductName Reviews</h4></div>

@if (!Model.Reviews.Any())
{
  <p>There are no reviews</p>
}
else
{
  <ul>
    @foreach (var review in Model.Reviews)
    {
      <li>
          @for(int i=0;i< review.Rating; i++)
          {
            <i class="bi bi-star-fill" style="color:  gold"></i>
          }

          @for(int i=0; i<(5 - review.Rating); i++) 
          {
            <i class="bi bi-star" style="color:  gold"></i>
          }
           - @review.ReviewText
          
          @if (User?.Identity?.IsAuthenticated ?? true)
          {
            if (User.IsInRole("admin"))
            {
                <span> | </span><a asp-action="error" asp-route-id="@review.ProductID">Delete</a>
            }
          }
      </li>
    }
  </ul>
}

<hr />
<a asp-action="Index" asp-route-id="@Model.CategoryId">Home</a> 
@if(User?.Identity?.IsAuthenticated ?? true)
{
  @* this needs to change so is not 'admin' but is 'customer who has purchased this' *@
  if (User.IsInRole("admin"))
  {
    <a asp-action="AddReview" asp-route-id="@Model.ProductId"> | Add Review</a>
  }
}
